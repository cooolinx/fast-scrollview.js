# FastScrollView 示例集合

## 📂 示例列表

### 1. 基础示例 (basic.html)
- **数据量**: 100,000 条
- **特点**: 展示所有核心 API 的使用
- **适合**: 了解基本功能和 API

### 2. 动态高度示例 (dynamic-height.html)
- **数据量**: 20,000 条
- **特点**: 三种不同高度的卡片（小、中、大）
- **适合**: 验证动态高度测量和缓存

### 3. 跳跃式渲染测试 (test-optimized.html)
- **数据量**: 10,000 条
- **特点**: 测试从任意位置开始渲染的能力
- **适合**: 验证跳跃渲染和按需加载

### 4. 调试工具 (test-debug.html)
- **数据量**: 30 条
- **特点**: 详细的滚动日志和状态监控
- **适合**: 调试和分析滚动行为

### 5. 聊天应用示例 (chat-app.html)
- **数据量**: 50,000 条消息
- **特点**: 模拟真实聊天场景
- **适合**: 实际应用场景演示

### 6. 调试示例 (debug-basic.html, debug-dom.html)
- **特点**: 用于开发调试的示例
- **适合**: 开发者测试和调试

## 🚀 如何使用

1. **直接打开**: 在浏览器中打开 `index.html` 查看所有示例
2. **本地服务器**: 推荐使用本地服务器运行，避免 CORS 问题
   ```bash
   # 使用 Python
   python -m http.server 8000
   
   # 或使用 Node.js http-server
   npx http-server
   ```
3. **访问**: 打开 http://localhost:8000/examples/

## ⚡ 核心特性

### 跳跃式渲染
- 不需要预先计算所有元素位置
- 可以从任意位置（如第 5000 项）开始渲染
- 只渲染当前可见区域 + 缓冲区
- 向上或向下滚动时自动扩展

### 性能优势
- **初始化快**: 只渲染首屏，启动速度快
- **内存少**: DOM 节点数量始终保持在可见区域范围
- **无跳动**: 精心设计的占位符管理策略
- **流畅**: 滚动如丝般顺滑

## 📝 示例代码

```javascript
// 创建实例
const fsv = new FastScrollView(
  '#container',
  items,
  (item, index) => {
    const div = document.createElement('div');
    div.textContent = `Item #${index}: ${item.title}`;
    return div;
  },
  {
    estimatedItemHeight: 50
  }
);

// 跳转到任意位置（只渲染附近元素）
fsv.scrollToItem(5000);  // 跳转到 #5000

// 跳转到顶部
fsv.scrollToTop();  // 相当于 scrollToItem(0)

// 跳转到底部
fsv.scrollToBottom();  // 相当于 scrollToItem(items.length - 1)
```

## 🎯 技术细节

### 渲染策略
1. **首次加载**: 从 scrollTop=0 开始渲染首屏内容
2. **跳转**: 清空现有渲染，从目标位置开始渲染
3. **向下滚动**: 检测接近底部，自动追加新元素
4. **向上滚动**: 检测接近顶部，自动在前面插入元素

### 占位符管理
- **topSpacer**: 未渲染的顶部区域高度
- **bottomSpacer**: 未渲染的底部区域高度
- **动态更新**: 随着渲染范围变化自动调整

### 缓存策略
- 已测量的元素高度会被缓存
- 跳转到已访问过的位置会使用缓存的高度
- 缓存随着滚动逐渐填充，位置计算越来越准确

## 📊 性能对比

| 操作 | 传统虚拟滚动 | FastScrollView |
|------|-------------|----------------|
| 跳转到 #5000 | 渲染 0-5020 (5020个) | 只渲染 #5000附近 (20-30个) |
| 初始化 | 计算所有位置 | 只渲染首屏 |
| 滚动 | 删除/添加元素 | 双向扩展，不删除 |
| 跳动 | 可能跳动 | 完全无跳动 ✅ |

## 🔗 相关资源

- [项目根目录 README](../README.md)
- [优化文档](../OPTIMIZATION.md)
- [源码](../src/index.js)


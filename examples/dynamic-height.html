<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>åŠ¨æ€é«˜åº¦ç¤ºä¾‹ - FastScrollView</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
    }

    h1 {
      color: white;
      text-align: center;
      margin-bottom: 20px;
      font-size: 36px;
    }

    .controls {
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }

    .button-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 15px;
    }

    button {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(245, 87, 108, 0.4);
    }

    .info {
      font-size: 14px;
      color: #333;
      background: #fff3cd;
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #f5576c;
    }

    .scroll-wrapper {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
    }

    #scroll-container {
      height: 600px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      overflow: auto;
    }

    /* ä¸åŒé«˜åº¦çš„å¡ç‰‡æ ·å¼ */
    .card-small {
      padding: 15px 20px;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .card-medium {
      padding: 25px 20px;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .card-large {
      padding: 35px 20px;
      margin-bottom: 10px;
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .card-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .card-content {
      font-size: 14px;
      line-height: 1.6;
      opacity: 0.9;
    }

    .card-meta {
      margin-top: 10px;
      font-size: 12px;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“ åŠ¨æ€é«˜åº¦ç¤ºä¾‹</h1>

    <div class="controls">
      <div class="button-group">
        <button onclick="scrollToTop()">æ»šåŠ¨åˆ°é¡¶éƒ¨</button>
        <button onclick="scrollToBottom()">æ»šåŠ¨åˆ°åº•éƒ¨</button>
        <button onclick="scrollToItem(5000)">æ»šåŠ¨åˆ° #5000</button>
        <button onclick="scrollToItem(10000)">æ»šåŠ¨åˆ° #10000</button>
        <button onclick="addRandomCard()">æ·»åŠ éšæœºå¡ç‰‡</button>
        <button onclick="fsv.refresh()">åˆ·æ–°é«˜åº¦</button>
      </div>

      <div class="info">
        <strong>ğŸ’¡ è¯´æ˜:</strong> æ­¤ç¤ºä¾‹å±•ç¤ºäº†ä¸åŒé«˜åº¦çš„å¡ç‰‡ï¼ˆå°ã€ä¸­ã€å¤§ï¼‰ï¼ŒFastScrollView ä¼šè‡ªåŠ¨æµ‹é‡å¹¶ç¼“å­˜æ¯ä¸ªå…ƒç´ çš„å®é™…é«˜åº¦ï¼Œç¡®ä¿æ»šåŠ¨ä½ç½®çš„å‡†ç¡®æ€§ã€‚
      </div>
    </div>

    <div class="scroll-wrapper">
      <div id="scroll-container"></div>
    </div>
  </div>

  <script src="../dist/fast-scrollview.min.js"></script>
  <script>
    // ç”Ÿæˆä¸åŒé«˜åº¦çš„æµ‹è¯•æ•°æ®
    const cardTypes = ['small', 'medium', 'large'];
    const cardContents = {
      small: 'è¿™æ˜¯ä¸€ä¸ªå°å¡ç‰‡ï¼Œå†…å®¹æ¯”è¾ƒç®€çŸ­ã€‚',
      medium: 'è¿™æ˜¯ä¸€ä¸ªä¸­ç­‰å¤§å°çš„å¡ç‰‡ï¼ŒåŒ…å«æ›´å¤šçš„å†…å®¹ä¿¡æ¯ã€‚å¯ä»¥æ˜¾ç¤ºæ›´è¯¦ç»†çš„æè¿°å’Œè¯´æ˜æ–‡å­—ã€‚',
      large: 'è¿™æ˜¯ä¸€ä¸ªå¤§å¡ç‰‡ï¼ŒåŒ…å«ä¸°å¯Œçš„å†…å®¹ã€‚å¯ä»¥æ˜¾ç¤ºå®Œæ•´çš„æ–‡ç« æ‘˜è¦ã€è¯¦ç»†çš„äº§å“æè¿°æˆ–è€…å¤šè¡Œçš„ç”¨æˆ·è¯„è®ºã€‚è¿™ç§å¡ç‰‡é€‚åˆå±•ç¤ºé‡è¦ä¿¡æ¯æˆ–è€…éœ€è¦çªå‡ºæ˜¾ç¤ºçš„å†…å®¹ã€‚'
    };

    let items = [];
    const DATA_SIZE = 20000;

    console.time('ç”ŸæˆåŠ¨æ€é«˜åº¦æ•°æ®');
    for (let i = 0; i < DATA_SIZE; i++) {
      const type = cardTypes[Math.floor(Math.random() * cardTypes.length)];
      items.push({
        id: i,
        type: type,
        title: `${type.toUpperCase()} å¡ç‰‡ #${i + 1}`,
        content: cardContents[type],
        timestamp: new Date(Date.now() - Math.random() * 10000000000).toLocaleString()
      });
    }
    console.timeEnd('ç”ŸæˆåŠ¨æ€é«˜åº¦æ•°æ®');

    // æ¸²æŸ“å‡½æ•° - æ ¹æ®ç±»å‹è¿”å›ä¸åŒé«˜åº¦çš„å…ƒç´ 
    function renderItem(item, index, totalSize) {
      const div = document.createElement('div');
      div.className = `card-${item.type}`;
      div.innerHTML = `
        <div class="card-title">${item.title}</div>
        <div class="card-content">${item.content}</div>
        <div class="card-meta">ç´¢å¼•: ${index} | ç±»å‹: ${item.type} | ${item.timestamp}</div>
      `;
      return div;
    }

    // åˆ›å»º FastScrollView å®ä¾‹
    console.time('åˆå§‹åŒ–è™šæ‹Ÿæ»šåŠ¨');
    const fsv = new FastScrollView(
      '#scroll-container',
      items,
      renderItem,
      {
        estimatedItemHeight: 80, // é¢„ä¼°é«˜åº¦
        bufferSize: 3
      }
    );
    console.timeEnd('åˆå§‹åŒ–è™šæ‹Ÿæ»šåŠ¨');

    // æ§åˆ¶å‡½æ•°
    function scrollToTop() {
      fsv.scrollToTop();
    }

    function scrollToBottom() {
      fsv.scrollToBottom();
    }

    function scrollToItem(index) {
      if (index >= 0 && index < items.length) {
        fsv.scrollToItem(index);
        setTimeout(() => {
          alert(`å·²æ»šåŠ¨åˆ° #${index}`);
        }, 100);
      }
    }

    function addRandomCard() {
      const type = cardTypes[Math.floor(Math.random() * cardTypes.length)];
      const newItem = {
        id: Date.now(),
        type: type,
        title: `æ–°${type.toUpperCase()}å¡ç‰‡ #${items.length + 1}`,
        content: cardContents[type],
        timestamp: new Date().toLocaleString()
      };
      fsv.append(newItem);
      alert('å·²æ·»åŠ æ–°å¡ç‰‡ï¼Œå¯æ»šåŠ¨åˆ°åº•éƒ¨æŸ¥çœ‹');
    }

    console.log(`FastScrollView å·²åˆå§‹åŒ–`);
    console.log(`æ€»æ•°æ®é‡: ${items.length.toLocaleString()} æ¡`);
    console.log(`åŒ…å«ä¸åŒé«˜åº¦çš„å¡ç‰‡: small, medium, large`);
  </script>
</body>
</html>

